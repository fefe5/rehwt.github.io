<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Routes &amp; POST requests</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>HTTP Requests &amp; Routes</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Routes &amp; GET Requests.html">01. Routes &amp; GET Requests</a>
    </li>
    <li class="">
      <a href="02. Exercise GET requests.html">02. Exercise: GET requests</a>
    </li>
    <li class="">
      <a href="03. More Powerful GET Requests.html">03. More Powerful GET Requests</a>
    </li>
    <li class="">
      <a href="04. Routes &amp; POST requests.html">04. Routes &amp; POST requests</a>
    </li>
    <li class="">
      <a href="05. Exercise POST requests.html">05. Exercise: POST requests</a>
    </li>
    <li class="">
      <a href="06. Client Side, Server Side.html">06. Client Side, Server Side</a>
    </li>
    <li class="">
      <a href="07. Client Side &amp; Server Side Example.html">07. Client Side &amp; Server Side Example</a>
    </li>
    <li class="">
      <a href="08. Exercise Client Side &amp; Server Side.html">08. Exercise: Client Side &amp; Server Side</a>
    </li>
    <li class="">
      <a href="09. Processing the POST request.html">09. Processing the POST request</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">04. Routes & POST requests</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3><p>Routes &amp; POST requests Heading</p></h3>
  <div>
  <h1 id="routes-post-requests">Routes: POST Requests</h1>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Routes &amp; POST intro</p></h3>
  <div>
  <p>One way to collect and store user data so that you can access it later is through making an HTTP POST request.  Analogous to the <code>.get()</code> Express method, there is also a <code>.post()</code> method to handle HTTP POST requests. An HTTP POST request sends data to the project's endpoint, where it is stored and can be accessed through a GET request, which we covered in the last lesson. Here is what a simple POST request could look like using the Express method <code>.post()</code>:</p>
<pre><code>// POST method route
app.post('/', function (req, res) {
  res.send('POST received')
})</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND#0001 C3 L3 A02 Routes And Post Requests</p></h3>
  <video controls>
  <source src="04. ND#0001 C3 L3 A02 Routes And Post Requests-sCNt1N5duE0.mp4" type="video/mp4">

  <track default="false" kind="subtitles" srclang="zh-CN" src="04. ND#0001 C3 L3 A02 Routes And Post Requests-sCNt1N5duE0.zh-CN.vtt" label="zh-CN">
  <track default="true" kind="subtitles" srclang="en" src="04. ND#0001 C3 L3 A02 Routes And Post Requests-sCNt1N5duE0.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Untitled</p></h3>
  <div>
  <p>Here is how you could setup a basic POST route in the server side code.</p>
<p>First, Create an array to hold data:</p>
<pre><code>const data = []</code></pre>
<p>Then, create <code>post()</code> with a url path and a callback function:</p>
<pre><code>app.post('/addMovie', addMovie )</code></pre>
<p>In the callback function, add the data received from <code>request.body</code>. This is the key piece of information we are interested in from that long stretch of data we saw previously that the request (req) argument returns.</p>
<pre><code>function addMovie (req, res){
   console.log(req.body)
   data.push(req.body)
}</code></pre>
<p>In the next section we will cover how to execute this POST route with a request from the client side code.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Routes &amp; POST requests Quiz</p></h3>
  <div>
  <form>
    <fieldset>
      <legend><p>Check all the following that are true about Express Routes and HTTP Requests</p></legend>
    </fieldset>

    <div>
      <input type="checkbox" value="rbk1" name="860313" id="rbk1">
      <label for="rbk1"><p>Express routes are setup in the server code</p></label>
    </div>
    <div>
      <input type="checkbox" value="rbk2" name="860313" id="rbk2">
      <label for="rbk2"><p>Express provides handlers that directly correspond to HTTP requests, such as GET and POST.</p></label>
    </div>
    <div>
      <input type="checkbox" value="rbk3" name="860313" id="rbk3">
      <label for="rbk3"><p>A GET request is used to save data to an app.</p></label>
    </div>
    <div>
      <input type="checkbox" value="rbk4" name="860313" id="rbk4">
      <label for="rbk4"><p>GET and POST requests are used to retrieve and save data between APIs and servers.</p></label>
    </div>
  </form>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    <ul>
      <li>Express routes are setup in the server code</li>
      <li>Express provides handlers that directly correspond to HTTP requests, such as GET and POST.</li>
      <li>GET and POST requests are used to retrieve and save data between APIs and servers.</li>
  </ul>
  </details>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Routes &amp; POST requests Quiz 2</p></h3>
  <div>
  <div>
    <p><strong>QUESTION:</strong> <p>Write a post route for adding a favorite ice cream flavor via the path <code>’/flavor’</code> to an array named <code>data</code>.</p>
<pre><code>const data = [];
app.post(//replace this text with route, addFlavor);

function addFlavor (req, res) {
  //replace this text to add the body of the request to the `data` array
}; </code></pre></p>
    <div class="" form-group">
      <label for="answer"><strong>ANSWER:</strong></label>
      <textarea class="form-control" id="answer"></textarea>
    </div>
  </div>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    <p><i>These answers need to be solved by yourself, I believe you can do it</i></p>

  </details>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Routes &amp; POST requests Summary</p></h3>
  <div>
  <div id="spoiler_1" style="display:none"><pre><code>const data = [];
app.post('/flavor', addFlavor);

function addFlavor (req, res) {
  data.push(req.body);
};</code></pre>
</div>
<p><button title="Click to show/hide content" type="button" onclick="if(document.getElementById('spoiler_1') .style.display=='none') {document.getElementById('spoiler_1') .style.display=''}else{document.getElementById('spoiler_1') .style.display='none'}">Show Solution</button></p>
<p>So how do we actually activate our POST route, and how does it know what data to process? We will learn the answer to those questions in the next lesson, when we learn about connecting client and server code. So far we have just been working on the server side, but next we will learn how to POST and GET data from the browser.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Routes &amp; POST requests Example Prep</p></h3>
  <div>
  <p>Here is how you could setup a basic POST route in the server side code.</p>
<p>First, Create an array to hold data:</p>
<pre><code>const data = []</code></pre>
<p>Then, create <code>post()</code> with a url path and a callback function:</p>
<pre><code>app.post('/addMovie', addMovie )</code></pre>
<p>In the callback function, add the data received from <code>request.body</code>. This is the key piece of information we are interested in from that long stretch of data we saw previously that the request (req) argument returns.</p>
<pre><code>function addMovie (req, res){
   console.log(req.body)
   data.push(req.body)
}</code></pre>
<p>In the next section we will cover how to execute this POST route with a request from the client side code.</p>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="05. Exercise POST requests.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('04. Routes &amp; POST requests')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
