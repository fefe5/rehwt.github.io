WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:03.884
在 webpack 中 有两种方法可以设置环境模式

00:00:03.884 --> 00:00:07.349
可以通过在终端使用 CLI 工具

00:00:07.349 --> 00:00:11.934
也可以在 webpack 配置文件中进行设置

00:00:11.935 --> 00:00:15.765
如果你需要通过终端运行 完全没问题

00:00:15.765 --> 00:00:18.510
不过在本课程中 我们将教你如何

00:00:18.510 --> 00:00:21.660
将模式嵌入到配置中

00:00:21.660 --> 00:00:24.675
我们会按照 webpack 文档

00:00:24.675 --> 00:00:29.804
创建两个不同的配置文件 分别用于生产和开发模式

00:00:29.804 --> 00:00:32.505
在 webpack 配置文件中

00:00:32.505 --> 00:00:39.304
你可以在 module.exports 添加一个模式属性来标识模式

00:00:39.304 --> 00:00:41.149
可以在这里设置生产

00:00:41.149 --> 00:00:43.100
可以将开发放在这里

00:00:43.100 --> 00:00:47.480
很多专业应用都包含两种以上的模式

00:00:47.479 --> 00:00:52.819
所以你很可能还有一个测试模式或其他不为人知的模式

00:00:52.820 --> 00:00:55.579
不过 webpack 模式相当灵活

00:00:55.579 --> 00:00:58.670
可以创建任何你需要的模式

00:00:58.670 --> 00:01:02.480
不过每个应用都会有开发和生产环境

00:01:02.479 --> 00:01:05.979
所以 我们在本课程中也专注于这两种模式

00:01:05.980 --> 00:01:07.680
在你的 webpack 文件中

00:01:07.680 --> 00:01:13.865
你可以创建条件语句来检测当前处于生产还是开发模式

00:01:13.864 --> 00:01:17.359
但这可能会导致混乱 最终会得到很多

00:01:17.359 --> 00:01:21.334
极其相似 彼此重叠但又不完全相同的逻辑

00:01:21.334 --> 00:01:26.104
因此 为了使 webpack 配置更加简洁

00:01:26.105 --> 00:01:30.109
我们会创建第二个 webpack 配置文件

00:01:30.109 --> 00:01:32.810
在项目的根目录下

00:01:32.810 --> 00:01:36.814
准确来说是在和当前 webpack 配置文件同级目录中

00:01:36.814 --> 00:01:41.134
创建一个新文件 区分命名为生产相关

00:01:41.135 --> 00:01:45.305
例如 webpack.prod.js

00:01:45.305 --> 00:01:48.580
现在有了新的 webpack.prod 配置文件

00:01:48.579 --> 00:01:53.390
只需要将 webpack.config 文件重命名为开发文件即可

00:01:53.390 --> 00:01:55.620
在文本编辑器中

00:01:55.620 --> 00:02:00.859
重命名这个文件 我将重命名为 dev

00:02:00.859 --> 00:02:06.659
现在 将 dev 文件的内容复制到 prod 文件中

00:02:06.659 --> 00:02:10.009
虽然最终我们会彻底修改生产配置文件

00:02:10.009 --> 00:02:12.349
现在这样做是为了其中能有些内容

00:02:12.349 --> 00:02:15.039
运行起来 所以先使用这些内容

00:02:15.039 --> 00:02:18.674
现在有了一个 dev 和一个 prod 文件

00:02:18.675 --> 00:02:21.410
我们需要能够运行它们

00:02:21.409 --> 00:02:29.000
但是当前 package.json 中有一个通用的构建命令

00:02:29.000 --> 00:02:34.219
现在需要分别引用 dev 和 prod 文件的构建命令

00:02:34.219 --> 00:02:40.520
所以我要替换为专用命令

00:02:40.520 --> 00:02:44.330
现在有一个 build-prod 和一个 build-dev 命令

00:02:44.330 --> 00:02:48.480
分别对应 webpack prod 和 dev 配置

00:02:48.479 --> 00:02:50.334
分别对应 webpack prod 和 dev 配置

00:02:50.335 --> 00:02:58.625
现在这两个命令都已指向正确的配置文件了

00:02:58.625 --> 00:03:02.990
现在这两个命令都已指向正确的配置文件了

00:03:02.990 --> 00:03:07.325
我们可以分别运行 而这正是 webpack 带来的灵活性

00:03:07.324 --> 00:03:10.879
我可以模拟生产模式

00:03:10.879 --> 00:03:15.329
只需要运行一个稍微不同的命令就可以了 非常棒

